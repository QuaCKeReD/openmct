FROM node:14.19.0-stretch

ENV HOME /opt/openmct

RUN apt update \
  && apt upgrade \
  && apt install -y git curl binutils

COPY ./ ${HOME}
# WORKDIR /opt
# RUN git clone https://github.com/nasa/openmct.git \
#   && cd openmct

WORKDIR ${HOME}

ENV NPM_CONFIG_LOGLEVEL info
RUN npm install
# RUN npm install appdynamics@next

EXPOSE 8080

ENTRYPOINT ["npm", "start", "--", "--host", "0.0.0.0"]


# docker build . -f ./build/Dockerfile-stretch -t quackered/openmct-docker:stretch --label VER=2.0.1-SNAPSHOT
# docker push quackered/openmct-docker:stretch
